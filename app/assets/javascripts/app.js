var myApp = angular.module('myApp', ['templates', 'ngRoute', 'ui.bootstrap', 'rails', 'selectize', 'LocalStorageModule']);

myApp.config(['$routeProvider', function($routeProvider) {
  $routeProvider
    .when('/deck_editor', {
      templateUrl: 'pages/decks/index.html',
      controller: 'decksIndex'
    })
    .when('/deck_editor/new', {
      templateUrl: 'pages/decks/show.html',
      controller: 'decksShow'
    })
    .when('/deck_editor/:id', {
      templateUrl: 'pages/decks/show.html',
      controller: 'decksShow'
    })
    .when('/play', {
      templateUrl: 'pages/home.html',
      controller: 'board'
    })
    .otherwise('/deck_editor', {
      templateUrl: 'pages/decks/index.html',
      controller: 'decksIndex'
    });
}]);

myApp.config(['localStorageServiceProvider', function(localStorageServiceProvider) {
  // Localhost needs '' on chrome.
  var cookieDomain = window.location.origin == "http://localhost:3000" ? "" : window.location;

  localStorageServiceProvider
    .setPrefix('blacklotusclub')
    .setStorageCookie(0, '/')
    .setStorageCookieDomain(cookieDomain)
    .setNotify(true, true);
}]);

myApp.factory('PlainsWalker', ['railsResourceFactory', function (railsResourceFactory) {
  return railsResourceFactory({
    url: '/plains_walkers',
    name: 'plainsWalker'
  });
}]);

// Not used in Blockspring demo
myApp.factory('Deck', ['railsResourceFactory', function (railsResourceFactory) {
  return railsResourceFactory({
    url: '/decks',
    name: 'deck'
  });
}]);

// For Blockspring demo
myApp.factory('DeckService', ['localStorageService', function(localStorageService){
  var decks = localStorageService.get('decks') || [];

  if (decks.length == 0) {
    // Add all seed decks
    var basicElves = {id: 1, "name":"Basic Elves","cards":[{"id":20261,"multiverse_id":282542,"set_number":5,"name":"Dryad Arbor","search_name":"dryadarbor","description":"(Dryad Arbor isn't a spell, it's affected by summoning sickness, and it has \"{Tap}: Add {Green} to your mana pool.\")","converted_mana_cost":0,"colors":["green"],"count":2},{"id":20261,"multiverse_id":282542,"set_number":5,"name":"Dryad Arbor","search_name":"dryadarbor","description":"(Dryad Arbor isn't a spell, it's affected by summoning sickness, and it has \"{Tap}: Add {Green} to your mana pool.\")","converted_mana_cost":0,"colors":["green"],"count":2},{"id":287,"multiverse_id":289,"set_number":91,"name":"Forest","search_name":"forest","description":"G","converted_mana_cost":0,"colors":["None"],"count":2},{"id":287,"multiverse_id":289,"set_number":91,"name":"Forest","search_name":"forest","description":"G","converted_mana_cost":0,"colors":["None"],"count":2},{"id":15686,"multiverse_id":190413,"set_number":220,"name":"Misty Rainforest","search_name":"mistyrainforest","description":"{Tap}, Pay 1 life, Sacrifice Misty Rainforest: Search your library for a Forest or Island card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":1},{"id":8991,"multiverse_id":39506,"set_number":330,"name":"Wooded Foothills","search_name":"woodedfoothills","description":"{Tap}, Pay 1 life, Sacrifice Wooded Foothills: Search your library for a Mountain or Forest card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":8991,"multiverse_id":39506,"set_number":330,"name":"Wooded Foothills","search_name":"woodedfoothills","description":"{Tap}, Pay 1 life, Sacrifice Wooded Foothills: Search your library for a Mountain or Forest card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":8991,"multiverse_id":39506,"set_number":330,"name":"Wooded Foothills","search_name":"woodedfoothills","description":"{Tap}, Pay 1 life, Sacrifice Wooded Foothills: Search your library for a Mountain or Forest card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":8991,"multiverse_id":39506,"set_number":330,"name":"Wooded Foothills","search_name":"woodedfoothills","description":"{Tap}, Pay 1 life, Sacrifice Wooded Foothills: Search your library for a Mountain or Forest card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":8992,"multiverse_id":39507,"set_number":328,"name":"Windswept Heath","search_name":"windsweptheath","description":"{Tap}, Pay 1 life, Sacrifice Windswept Heath: Search your library for a Forest or Plains card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":8992,"multiverse_id":39507,"set_number":328,"name":"Windswept Heath","search_name":"windsweptheath","description":"{Tap}, Pay 1 life, Sacrifice Windswept Heath: Search your library for a Forest or Plains card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":8992,"multiverse_id":39507,"set_number":328,"name":"Windswept Heath","search_name":"windsweptheath","description":"{Tap}, Pay 1 life, Sacrifice Windswept Heath: Search your library for a Forest or Plains card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":8992,"multiverse_id":39507,"set_number":328,"name":"Windswept Heath","search_name":"windsweptheath","description":"{Tap}, Pay 1 life, Sacrifice Windswept Heath: Search your library for a Forest or Plains card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":15876,"multiverse_id":193400,"set_number":229,"name":"Verdant Catacombs","search_name":"verdantcatacombs","description":"{Tap}, Pay 1 life, Sacrifice Verdant Catacombs: Search your library for a Swamp or Forest card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":2},{"id":15876,"multiverse_id":193400,"set_number":229,"name":"Verdant Catacombs","search_name":"verdantcatacombs","description":"{Tap}, Pay 1 life, Sacrifice Verdant Catacombs: Search your library for a Swamp or Forest card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":0,"colors":["None"],"count":2},{"id":279,"multiverse_id":280,"set_number":13,"name":"Bayou","search_name":"bayou","description":null,"converted_mana_cost":0,"colors":["None"],"count":2},{"id":279,"multiverse_id":280,"set_number":13,"name":"Bayou","search_name":"bayou","description":null,"converted_mana_cost":0,"colors":["None"],"count":2},{"id":5498,"multiverse_id":10422,"set_number":321,"name":"Gaea's Cradle","search_name":"gaeascradle","description":"{Tap}: Add {Green} to your mana pool for each creature you control.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":5498,"multiverse_id":10422,"set_number":321,"name":"Gaea's Cradle","search_name":"gaeascradle","description":"{Tap}: Add {Green} to your mana pool for each creature you control.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":5498,"multiverse_id":10422,"set_number":321,"name":"Gaea's Cradle","search_name":"gaeascradle","description":"{Tap}: Add {Green} to your mana pool for each creature you control.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":5498,"multiverse_id":10422,"set_number":321,"name":"Gaea's Cradle","search_name":"gaeascradle","description":"{Tap}: Add {Green} to your mana pool for each creature you control.","converted_mana_cost":0,"colors":["None"],"count":4},{"id":3401,"multiverse_id":3674,"set_number":106,"name":"Quirion Ranger","search_name":"quirionranger","description":"Return a Forest you control to its owner's hand: Untap target creature. Activate this ability only once each turn.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":3401,"multiverse_id":3674,"set_number":106,"name":"Quirion Ranger","search_name":"quirionranger","description":"Return a Forest you control to its owner's hand: Untap target creature. Activate this ability only once each turn.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":3401,"multiverse_id":3674,"set_number":106,"name":"Quirion Ranger","search_name":"quirionranger","description":"Return a Forest you control to its owner's hand: Untap target creature. Activate this ability only once each turn.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":3401,"multiverse_id":3674,"set_number":106,"name":"Quirion Ranger","search_name":"quirionranger","description":"Return a Forest you control to its owner's hand: Untap target creature. Activate this ability only once each turn.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":9113,"multiverse_id":39836,"set_number":248,"name":"Birchlore Rangers","search_name":"birchlorerangers","description":"Tap two untapped Elves you control: Add one mana of any color to your mana pool.\nMorph {Green}(You may cast this face down as a 2/2 creature for {3}. Turn it face up any time for its morph cost.)","converted_mana_cost":1,"colors":["green"],"count":2},{"id":9113,"multiverse_id":39836,"set_number":248,"name":"Birchlore Rangers","search_name":"birchlorerangers","description":"Tap two untapped Elves you control: Add one mana of any color to your mana pool.\nMorph {Green}(You may cast this face down as a 2/2 creature for {3}. Turn it face up any time for its morph cost.)","converted_mana_cost":1,"colors":["green"],"count":2},{"id":14023,"multiverse_id":152556,"set_number":126,"name":"Heritage Druid","search_name":"heritagedruid","description":"Tap three untapped Elves you control: Add {Green}{Green}{Green} to your mana pool.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":14023,"multiverse_id":152556,"set_number":126,"name":"Heritage Druid","search_name":"heritagedruid","description":"Tap three untapped Elves you control: Add {Green}{Green}{Green} to your mana pool.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":14023,"multiverse_id":152556,"set_number":126,"name":"Heritage Druid","search_name":"heritagedruid","description":"Tap three untapped Elves you control: Add {Green}{Green}{Green} to your mana pool.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":14023,"multiverse_id":152556,"set_number":126,"name":"Heritage Druid","search_name":"heritagedruid","description":"Tap three untapped Elves you control: Add {Green}{Green}{Green} to your mana pool.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":13948,"multiverse_id":151095,"set_number":71,"name":"Nettle Sentinel","search_name":"nettlesentinel","description":"Nettle Sentinel doesn't untap during your untap step.\nWhenever you cast a green spell, you may untap Nettle Sentinel.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":13948,"multiverse_id":151095,"set_number":71,"name":"Nettle Sentinel","search_name":"nettlesentinel","description":"Nettle Sentinel doesn't untap during your untap step.\nWhenever you cast a green spell, you may untap Nettle Sentinel.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":13948,"multiverse_id":151095,"set_number":71,"name":"Nettle Sentinel","search_name":"nettlesentinel","description":"Nettle Sentinel doesn't untap during your untap step.\nWhenever you cast a green spell, you may untap Nettle Sentinel.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":13948,"multiverse_id":151095,"set_number":71,"name":"Nettle Sentinel","search_name":"nettlesentinel","description":"Nettle Sentinel doesn't untap during your untap step.\nWhenever you cast a green spell, you may untap Nettle Sentinel.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":9824,"multiverse_id":45859,"set_number":133,"name":"Wirewood Symbiote","search_name":"wirewoodsymbiote","description":"Return an Elf you control to its owner's hand: Untap target creature. Activate this ability only once each turn.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":9824,"multiverse_id":45859,"set_number":133,"name":"Wirewood Symbiote","search_name":"wirewoodsymbiote","description":"Return an Elf you control to its owner's hand: Untap target creature. Activate this ability only once each turn.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":9824,"multiverse_id":45859,"set_number":133,"name":"Wirewood Symbiote","search_name":"wirewoodsymbiote","description":"Return an Elf you control to its owner's hand: Untap target creature. Activate this ability only once each turn.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":9824,"multiverse_id":45859,"set_number":133,"name":"Wirewood Symbiote","search_name":"wirewoodsymbiote","description":"Return an Elf you control to its owner's hand: Untap target creature. Activate this ability only once each turn.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":20331,"multiverse_id":290529,"set_number":213,"name":"Deathrite Shaman","search_name":"deathriteshaman","description":"{Tap}: Exile target land card from a graveyard. Add one mana of any color to your mana pool.\n{Black}, {Tap}: Exile target instant or sorcery card from a graveyard. Each opponent loses 2 life.\n{Green}, {Tap}: Exile target creature card from a graveyard. You gain 2 life.","converted_mana_cost":1,"colors":["green","black"],"count":4},{"id":20331,"multiverse_id":290529,"set_number":213,"name":"Deathrite Shaman","search_name":"deathriteshaman","description":"{Tap}: Exile target land card from a graveyard. Add one mana of any color to your mana pool.\n{Black}, {Tap}: Exile target instant or sorcery card from a graveyard. Each opponent loses 2 life.\n{Green}, {Tap}: Exile target creature card from a graveyard. You gain 2 life.","converted_mana_cost":1,"colors":["green","black"],"count":4},{"id":20331,"multiverse_id":290529,"set_number":213,"name":"Deathrite Shaman","search_name":"deathriteshaman","description":"{Tap}: Exile target land card from a graveyard. Add one mana of any color to your mana pool.\n{Black}, {Tap}: Exile target instant or sorcery card from a graveyard. Each opponent loses 2 life.\n{Green}, {Tap}: Exile target creature card from a graveyard. You gain 2 life.","converted_mana_cost":1,"colors":["green","black"],"count":4},{"id":20331,"multiverse_id":290529,"set_number":213,"name":"Deathrite Shaman","search_name":"deathriteshaman","description":"{Tap}: Exile target land card from a graveyard. Add one mana of any color to your mana pool.\n{Black}, {Tap}: Exile target instant or sorcery card from a graveyard. Each opponent loses 2 life.\n{Green}, {Tap}: Exile target creature card from a graveyard. You gain 2 life.","converted_mana_cost":1,"colors":["green","black"],"count":4},{"id":10900,"multiverse_id":75241,"set_number":210,"name":"Glimpse of Nature","search_name":"glimpseofnature","description":"Whenever you cast a creature spell this turn, draw a card.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":10900,"multiverse_id":75241,"set_number":210,"name":"Glimpse of Nature","search_name":"glimpseofnature","description":"Whenever you cast a creature spell this turn, draw a card.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":10900,"multiverse_id":75241,"set_number":210,"name":"Glimpse of Nature","search_name":"glimpseofnature","description":"Whenever you cast a creature spell this turn, draw a card.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":10900,"multiverse_id":75241,"set_number":210,"name":"Glimpse of Nature","search_name":"glimpseofnature","description":"Whenever you cast a creature spell this turn, draw a card.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":18182,"multiverse_id":221559,"set_number":81,"name":"Green Sun's Zenith","search_name":"greensunszenith","description":"Search your library for a green creature card with converted mana cost X or less, put it onto the battlefield, then shuffle your library. Shuffle Green Sun's Zenith into its owner's library.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":18182,"multiverse_id":221559,"set_number":81,"name":"Green Sun's Zenith","search_name":"greensunszenith","description":"Search your library for a green creature card with converted mana cost X or less, put it onto the battlefield, then shuffle your library. Shuffle Green Sun's Zenith into its owner's library.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":18182,"multiverse_id":221559,"set_number":81,"name":"Green Sun's Zenith","search_name":"greensunszenith","description":"Search your library for a green creature card with converted mana cost X or less, put it onto the battlefield, then shuffle your library. Shuffle Green Sun's Zenith into its owner's library.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":18182,"multiverse_id":221559,"set_number":81,"name":"Green Sun's Zenith","search_name":"greensunszenith","description":"Search your library for a green creature card with converted mana cost X or less, put it onto the battlefield, then shuffle your library. Shuffle Green Sun's Zenith into its owner's library.","converted_mana_cost":1,"colors":["green"],"count":4},{"id":14836,"multiverse_id":175124,"set_number":130,"name":"Elvish Visionary","search_name":"elvishvisionary","description":"When Elvish Visionary enters the battlefield, draw a card.","converted_mana_cost":2,"colors":["green"],"count":4},{"id":14836,"multiverse_id":175124,"set_number":130,"name":"Elvish Visionary","search_name":"elvishvisionary","description":"When Elvish Visionary enters the battlefield, draw a card.","converted_mana_cost":2,"colors":["green"],"count":4},{"id":14836,"multiverse_id":175124,"set_number":130,"name":"Elvish Visionary","search_name":"elvishvisionary","description":"When Elvish Visionary enters the battlefield, draw a card.","converted_mana_cost":2,"colors":["green"],"count":4},{"id":14836,"multiverse_id":175124,"set_number":130,"name":"Elvish Visionary","search_name":"elvishvisionary","description":"When Elvish Visionary enters the battlefield, draw a card.","converted_mana_cost":2,"colors":["green"],"count":4},{"id":3398,"multiverse_id":3671,"set_number":89,"name":"Natural Order","search_name":"naturalorder","description":"As an additional cost to cast Natural Order, sacrifice a green creature.\nSearch your library for a green creature card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":4,"colors":["green"],"count":4},{"id":3398,"multiverse_id":3671,"set_number":89,"name":"Natural Order","search_name":"naturalorder","description":"As an additional cost to cast Natural Order, sacrifice a green creature.\nSearch your library for a green creature card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":4,"colors":["green"],"count":4},{"id":3398,"multiverse_id":3671,"set_number":89,"name":"Natural Order","search_name":"naturalorder","description":"As an additional cost to cast Natural Order, sacrifice a green creature.\nSearch your library for a green creature card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":4,"colors":["green"],"count":4},{"id":3398,"multiverse_id":3671,"set_number":89,"name":"Natural Order","search_name":"naturalorder","description":"As an additional cost to cast Natural Order, sacrifice a green creature.\nSearch your library for a green creature card and put it onto the battlefield. Then shuffle your library.","converted_mana_cost":4,"colors":["green"],"count":4},{"id":18748,"multiverse_id":240027,"set_number":172,"name":"Craterhoof Behemoth","search_name":"craterhoofbehemoth","description":"Haste\nWhen Craterhoof Behemoth enters the battlefield, creatures you control gain trample and get +X/+X until end of turn, where X is the number of creatures you control.","converted_mana_cost":8,"colors":["green"],"count":2},{"id":18748,"multiverse_id":240027,"set_number":172,"name":"Craterhoof Behemoth","search_name":"craterhoofbehemoth","description":"Haste\nWhen Craterhoof Behemoth enters the battlefield, creatures you control gain trample and get +X/+X until end of turn, where X is the number of creatures you control.","converted_mana_cost":8,"colors":["green"],"count":2}]};
    decks.push(basicElves);

    var burnDeck = {"id":15333,"name":"Burnin Down The House","cards":[{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":23854,"multiverse_id":389602,"set_number":330,"name":"Mountain","search_name":"mountain","description":"R","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Mountain","count":16},{"id":15676,"multiverse_id":190400,"set_number":228,"name":"Valakut, the Molten Pinnacle","search_name":"valakutthemoltenpinnacle","description":"Valakut, the Molten Pinnacle enters the battlefield tapped.\nWhenever a Mountain enters the battlefield under your control, if you control at least five other Mountains, you may have Valakut, the Molten Pinnacle deal 3 damage to target creature or player.\n{Tap}: Add {Red} to your mana pool.","converted_mana_cost":0,"colors":["None"],"primary_type":"Land","sub_type":null,"count":4},{"id":15676,"multiverse_id":190400,"set_number":228,"name":"Valakut, the Molten Pinnacle","search_name":"valakutthemoltenpinnacle","description":"Valakut, the Molten Pinnacle enters the battlefield tapped.\nWhenever a Mountain enters the battlefield under your control, if you control at least five other Mountains, you may have Valakut, the Molten Pinnacle deal 3 damage to target creature or player.\n{Tap}: Add {Red} to your mana pool.","converted_mana_cost":0,"colors":["None"],"primary_type":"Land","sub_type":null,"count":4},{"id":15676,"multiverse_id":190400,"set_number":228,"name":"Valakut, the Molten Pinnacle","search_name":"valakutthemoltenpinnacle","description":"Valakut, the Molten Pinnacle enters the battlefield tapped.\nWhenever a Mountain enters the battlefield under your control, if you control at least five other Mountains, you may have Valakut, the Molten Pinnacle deal 3 damage to target creature or player.\n{Tap}: Add {Red} to your mana pool.","converted_mana_cost":0,"colors":["None"],"primary_type":"Land","sub_type":null,"count":4},{"id":15676,"multiverse_id":190400,"set_number":228,"name":"Valakut, the Molten Pinnacle","search_name":"valakutthemoltenpinnacle","description":"Valakut, the Molten Pinnacle enters the battlefield tapped.\nWhenever a Mountain enters the battlefield under your control, if you control at least five other Mountains, you may have Valakut, the Molten Pinnacle deal 3 damage to target creature or player.\n{Tap}: Add {Red} to your mana pool.","converted_mana_cost":0,"colors":["None"],"primary_type":"Land","sub_type":null,"count":4},{"id":8246,"multiverse_id":27255,"set_number":45,"name":"Lightning Bolt","search_name":"lightningbolt","description":"Lightning Bolt deals 3 damage to target creature or player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":8246,"multiverse_id":27255,"set_number":45,"name":"Lightning Bolt","search_name":"lightningbolt","description":"Lightning Bolt deals 3 damage to target creature or player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":8246,"multiverse_id":27255,"set_number":45,"name":"Lightning Bolt","search_name":"lightningbolt","description":"Lightning Bolt deals 3 damage to target creature or player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":8246,"multiverse_id":27255,"set_number":45,"name":"Lightning Bolt","search_name":"lightningbolt","description":"Lightning Bolt deals 3 damage to target creature or player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":14079,"multiverse_id":152837,"set_number":103,"name":"Shard Volley","search_name":"shardvolley","description":"As an additional cost to cast Shard Volley, sacrifice a land.\nShard Volley deals 3 damage to target creature or player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":14079,"multiverse_id":152837,"set_number":103,"name":"Shard Volley","search_name":"shardvolley","description":"As an additional cost to cast Shard Volley, sacrifice a land.\nShard Volley deals 3 damage to target creature or player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":14079,"multiverse_id":152837,"set_number":103,"name":"Shard Volley","search_name":"shardvolley","description":"As an additional cost to cast Shard Volley, sacrifice a land.\nShard Volley deals 3 damage to target creature or player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":14079,"multiverse_id":152837,"set_number":103,"name":"Shard Volley","search_name":"shardvolley","description":"As an additional cost to cast Shard Volley, sacrifice a land.\nShard Volley deals 3 damage to target creature or player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":11002,"multiverse_id":79084,"set_number":178,"name":"Lava Spike","search_name":"lavaspike","description":"Lava Spike deals 3 damage to target player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Sorcery","sub_type":"Arcane","count":4},{"id":11002,"multiverse_id":79084,"set_number":178,"name":"Lava Spike","search_name":"lavaspike","description":"Lava Spike deals 3 damage to target player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Sorcery","sub_type":"Arcane","count":4},{"id":11002,"multiverse_id":79084,"set_number":178,"name":"Lava Spike","search_name":"lavaspike","description":"Lava Spike deals 3 damage to target player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Sorcery","sub_type":"Arcane","count":4},{"id":11002,"multiverse_id":79084,"set_number":178,"name":"Lava Spike","search_name":"lavaspike","description":"Lava Spike deals 3 damage to target player.","converted_mana_cost":1,"colors":["red"],"primary_type":"Sorcery","sub_type":"Arcane","count":4},{"id":23550,"multiverse_id":386608,"set_number":118,"name":"Monastery Swiftspear","search_name":"monasteryswiftspear","description":"Haste\nProwess (Whenever you cast a noncreature spell, this creature gets +1/+1 until end of turn.)","converted_mana_cost":1,"colors":["red"],"primary_type":"Creature","sub_type":"Human Monk","count":4},{"id":23550,"multiverse_id":386608,"set_number":118,"name":"Monastery Swiftspear","search_name":"monasteryswiftspear","description":"Haste\nProwess (Whenever you cast a noncreature spell, this creature gets +1/+1 until end of turn.)","converted_mana_cost":1,"colors":["red"],"primary_type":"Creature","sub_type":"Human Monk","count":4},{"id":23550,"multiverse_id":386608,"set_number":118,"name":"Monastery Swiftspear","search_name":"monasteryswiftspear","description":"Haste\nProwess (Whenever you cast a noncreature spell, this creature gets +1/+1 until end of turn.)","converted_mana_cost":1,"colors":["red"],"primary_type":"Creature","sub_type":"Human Monk","count":4},{"id":23550,"multiverse_id":386608,"set_number":118,"name":"Monastery Swiftspear","search_name":"monasteryswiftspear","description":"Haste\nProwess (Whenever you cast a noncreature spell, this creature gets +1/+1 until end of turn.)","converted_mana_cost":1,"colors":["red"],"primary_type":"Creature","sub_type":"Human Monk","count":4},{"id":20214,"multiverse_id":278257,"set_number":164,"name":"Vexing Devil","search_name":"vexingdevil","description":"When Vexing Devil enters the battlefield, any opponent may have it deal 4 damage to him or her. If a player does, sacrifice Vexing Devil.","converted_mana_cost":1,"colors":["red"],"primary_type":"Creature","sub_type":"Devil","count":4},{"id":20214,"multiverse_id":278257,"set_number":164,"name":"Vexing Devil","search_name":"vexingdevil","description":"When Vexing Devil enters the battlefield, any opponent may have it deal 4 damage to him or her. If a player does, sacrifice Vexing Devil.","converted_mana_cost":1,"colors":["red"],"primary_type":"Creature","sub_type":"Devil","count":4},{"id":20214,"multiverse_id":278257,"set_number":164,"name":"Vexing Devil","search_name":"vexingdevil","description":"When Vexing Devil enters the battlefield, any opponent may have it deal 4 damage to him or her. If a player does, sacrifice Vexing Devil.","converted_mana_cost":1,"colors":["red"],"primary_type":"Creature","sub_type":"Devil","count":4},{"id":20214,"multiverse_id":278257,"set_number":164,"name":"Vexing Devil","search_name":"vexingdevil","description":"When Vexing Devil enters the battlefield, any opponent may have it deal 4 damage to him or her. If a player does, sacrifice Vexing Devil.","converted_mana_cost":1,"colors":["red"],"primary_type":"Creature","sub_type":"Devil","count":4},{"id":3197,"multiverse_id":3455,"set_number":146,"name":"Incinerate","search_name":"incinerate","description":"Incinerate deals 3 damage to target creature or player. A creature dealt damage this way can't be regenerated this turn.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":3197,"multiverse_id":3455,"set_number":146,"name":"Incinerate","search_name":"incinerate","description":"Incinerate deals 3 damage to target creature or player. A creature dealt damage this way can't be regenerated this turn.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":3197,"multiverse_id":3455,"set_number":146,"name":"Incinerate","search_name":"incinerate","description":"Incinerate deals 3 damage to target creature or player. A creature dealt damage this way can't be regenerated this turn.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":3197,"multiverse_id":3455,"set_number":146,"name":"Incinerate","search_name":"incinerate","description":"Incinerate deals 3 damage to target creature or player. A creature dealt damage this way can't be regenerated this turn.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":23163,"multiverse_id":383299,"set_number":155,"name":"Lightning Strike","search_name":"lightningstrike","description":"Lightning Strike deals 3 damage to target creature or player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":23163,"multiverse_id":383299,"set_number":155,"name":"Lightning Strike","search_name":"lightningstrike","description":"Lightning Strike deals 3 damage to target creature or player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":23163,"multiverse_id":383299,"set_number":155,"name":"Lightning Strike","search_name":"lightningstrike","description":"Lightning Strike deals 3 damage to target creature or player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":23163,"multiverse_id":383299,"set_number":155,"name":"Lightning Strike","search_name":"lightningstrike","description":"Lightning Strike deals 3 damage to target creature or player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":19408,"multiverse_id":249684,"set_number":147,"name":"Searing Spear","search_name":"searingspear","description":"Searing Spear deals 3 damage to target creature or player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":19408,"multiverse_id":249684,"set_number":147,"name":"Searing Spear","search_name":"searingspear","description":"Searing Spear deals 3 damage to target creature or player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":19408,"multiverse_id":249684,"set_number":147,"name":"Searing Spear","search_name":"searingspear","description":"Searing Spear deals 3 damage to target creature or player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":19408,"multiverse_id":249684,"set_number":147,"name":"Searing Spear","search_name":"searingspear","description":"Searing Spear deals 3 damage to target creature or player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":20450,"multiverse_id":366238,"set_number":106,"name":"Skullcrack","search_name":"skullcrack","description":"Players can't gain life this turn. Damage can't be prevented this turn. Skullcrack deals 3 damage to target player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":20450,"multiverse_id":366238,"set_number":106,"name":"Skullcrack","search_name":"skullcrack","description":"Players can't gain life this turn. Damage can't be prevented this turn. Skullcrack deals 3 damage to target player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":20450,"multiverse_id":366238,"set_number":106,"name":"Skullcrack","search_name":"skullcrack","description":"Players can't gain life this turn. Damage can't be prevented this turn. Skullcrack deals 3 damage to target player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":20450,"multiverse_id":366238,"set_number":106,"name":"Skullcrack","search_name":"skullcrack","description":"Players can't gain life this turn. Damage can't be prevented this turn. Skullcrack deals 3 damage to target player.","converted_mana_cost":2,"colors":["red"],"primary_type":"Instant","sub_type":null,"count":4},{"id":12326,"multiverse_id":108915,"set_number":176,"name":"Rift Bolt","search_name":"riftbolt","description":"Rift Bolt deals 3 damage to target creature or player.\nSuspend 1-{Red}(Rather than cast this card from your hand, you may pay {Red} and exile it with a time counter on it. At the beginning of your upkeep, remove a time counter. When the last is removed, cast it without paying its mana cost.)","converted_mana_cost":3,"colors":["red"],"primary_type":"Sorcery","sub_type":null,"count":4},{"id":12326,"multiverse_id":108915,"set_number":176,"name":"Rift Bolt","search_name":"riftbolt","description":"Rift Bolt deals 3 damage to target creature or player.\nSuspend 1-{Red}(Rather than cast this card from your hand, you may pay {Red} and exile it with a time counter on it. At the beginning of your upkeep, remove a time counter. When the last is removed, cast it without paying its mana cost.)","converted_mana_cost":3,"colors":["red"],"primary_type":"Sorcery","sub_type":null,"count":4},{"id":12326,"multiverse_id":108915,"set_number":176,"name":"Rift Bolt","search_name":"riftbolt","description":"Rift Bolt deals 3 damage to target creature or player.\nSuspend 1-{Red}(Rather than cast this card from your hand, you may pay {Red} and exile it with a time counter on it. At the beginning of your upkeep, remove a time counter. When the last is removed, cast it without paying its mana cost.)","converted_mana_cost":3,"colors":["red"],"primary_type":"Sorcery","sub_type":null,"count":4},{"id":12326,"multiverse_id":108915,"set_number":176,"name":"Rift Bolt","search_name":"riftbolt","description":"Rift Bolt deals 3 damage to target creature or player.\nSuspend 1-{Red}(Rather than cast this card from your hand, you may pay {Red} and exile it with a time counter on it. At the beginning of your upkeep, remove a time counter. When the last is removed, cast it without paying its mana cost.)","converted_mana_cost":3,"colors":["red"],"primary_type":"Sorcery","sub_type":null,"count":4}],"manaProportions":[],"maxCardId":108915};
    decks.push(burnDeck);

    var counterSpellDeck = {"id":637741,"name":"Counter All","cards":[{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":22244,"multiverse_id":380222,"set_number":40,"name":"Island","search_name":"island","description":"U","converted_mana_cost":0,"colors":["None"],"primary_type":"Basic Land","sub_type":"Island","count":24},{"id":19351,"multiverse_id":249373,"set_number":58,"name":"Vapor Snag","search_name":"vaporsnag","description":"Return target creature to its owner's hand. Its controller loses 1 life.","converted_mana_cost":1,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":19351,"multiverse_id":249373,"set_number":58,"name":"Vapor Snag","search_name":"vaporsnag","description":"Return target creature to its owner's hand. Its controller loses 1 life.","converted_mana_cost":1,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":19351,"multiverse_id":249373,"set_number":58,"name":"Vapor Snag","search_name":"vaporsnag","description":"Return target creature to its owner's hand. Its controller loses 1 life.","converted_mana_cost":1,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":19351,"multiverse_id":249373,"set_number":58,"name":"Vapor Snag","search_name":"vaporsnag","description":"Return target creature to its owner's hand. Its controller loses 1 life.","converted_mana_cost":1,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":18343,"multiverse_id":226749,"set_number":0,"name":"Delver of Secrets","search_name":"delverofsecrets","description":"At the beginning of your upkeep, look at the top card of your library. You may reveal that card. If an instant or sorcery card is revealed this way, transform Delver of Secrets.","converted_mana_cost":1,"colors":["blue"],"primary_type":"Creature","sub_type":"Human Wizard","count":4},{"id":18343,"multiverse_id":226749,"set_number":0,"name":"Delver of Secrets","search_name":"delverofsecrets","description":"At the beginning of your upkeep, look at the top card of your library. You may reveal that card. If an instant or sorcery card is revealed this way, transform Delver of Secrets.","converted_mana_cost":1,"colors":["blue"],"primary_type":"Creature","sub_type":"Human Wizard","count":4},{"id":18343,"multiverse_id":226749,"set_number":0,"name":"Delver of Secrets","search_name":"delverofsecrets","description":"At the beginning of your upkeep, look at the top card of your library. You may reveal that card. If an instant or sorcery card is revealed this way, transform Delver of Secrets.","converted_mana_cost":1,"colors":["blue"],"primary_type":"Creature","sub_type":"Human Wizard"},{"id":18343,"multiverse_id":226749,"set_number":0,"name":"Delver of Secrets","search_name":"delverofsecrets","description":"At the beginning of your upkeep, look at the top card of your library. You may reveal that card. If an instant or sorcery card is revealed this way, transform Delver of Secrets.","converted_mana_cost":1,"colors":["blue"],"primary_type":"Creature","sub_type":"Human Wizard"},{"id":17832,"multiverse_id":220047,"set_number":75,"name":"Silent Departure","search_name":"silentdeparture","description":"Return target creature to its owner's hand. \n Flashback {4}{Blue}    (You may cast this card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":1,"colors":["blue"],"primary_type":"Sorcery","sub_type":null,"count":2},{"id":17832,"multiverse_id":220047,"set_number":75,"name":"Silent Departure","search_name":"silentdeparture","description":"Return target creature to its owner's hand. \n Flashback {4}{Blue}    (You may cast this card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":1,"colors":["blue"],"primary_type":"Sorcery","sub_type":null,"count":2},{"id":9558,"multiverse_id":45242,"set_number":89,"name":"Mana Leak","search_name":"manaleak","description":"Counter target spell unless its controller pays {3}.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":9558,"multiverse_id":45242,"set_number":89,"name":"Mana Leak","search_name":"manaleak","description":"Counter target spell unless its controller pays {3}.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":9558,"multiverse_id":45242,"set_number":89,"name":"Mana Leak","search_name":"manaleak","description":"Counter target spell unless its controller pays {3}.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":9558,"multiverse_id":45242,"set_number":89,"name":"Mana Leak","search_name":"manaleak","description":"Counter target spell unless its controller pays {3}.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":17367,"multiverse_id":208222,"set_number":68,"name":"Negate","search_name":"negate","description":"Counter target noncreature spell.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":2},{"id":17367,"multiverse_id":208222,"set_number":68,"name":"Negate","search_name":"negate","description":"Counter target noncreature spell.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":2},{"id":17776,"multiverse_id":218016,"set_number":43,"name":"Psychic Barrier","search_name":"psychicbarrier","description":"Counter target creature spell. Its controller loses 1 life.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":17776,"multiverse_id":218016,"set_number":43,"name":"Psychic Barrier","search_name":"psychicbarrier","description":"Counter target creature spell. Its controller loses 1 life.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":17776,"multiverse_id":218016,"set_number":43,"name":"Psychic Barrier","search_name":"psychicbarrier","description":"Counter target creature spell. Its controller loses 1 life.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":17776,"multiverse_id":218016,"set_number":43,"name":"Psychic Barrier","search_name":"psychicbarrier","description":"Counter target creature spell. Its controller loses 1 life.","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":18474,"multiverse_id":230626,"set_number":83,"name":"Think Twice","search_name":"thinktwice","description":"Draw a card. \n Flashback {2}{Blue}    (You may cast this card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":18474,"multiverse_id":230626,"set_number":83,"name":"Think Twice","search_name":"thinktwice","description":"Draw a card. \n Flashback {2}{Blue}    (You may cast this card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":18474,"multiverse_id":230626,"set_number":83,"name":"Think Twice","search_name":"thinktwice","description":"Draw a card. \n Flashback {2}{Blue}    (You may cast this card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":18474,"multiverse_id":230626,"set_number":83,"name":"Think Twice","search_name":"thinktwice","description":"Draw a card. \n Flashback {2}{Blue}    (You may cast this card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":2,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":18416,"multiverse_id":227676,"set_number":78,"name":"Snapcaster Mage","search_name":"snapcastermage","description":"Flash \n When Snapcaster Mage enters the battlefield, target instant or sorcery card in your graveyard gains flashback until end of turn. The flashback cost is equal to its mana cost.   (You may cast that card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":2,"colors":["blue"],"primary_type":"Creature","sub_type":"Human Wizard","count":4},{"id":18416,"multiverse_id":227676,"set_number":78,"name":"Snapcaster Mage","search_name":"snapcastermage","description":"Flash \n When Snapcaster Mage enters the battlefield, target instant or sorcery card in your graveyard gains flashback until end of turn. The flashback cost is equal to its mana cost.   (You may cast that card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":2,"colors":["blue"],"primary_type":"Creature","sub_type":"Human Wizard","count":4},{"id":18416,"multiverse_id":227676,"set_number":78,"name":"Snapcaster Mage","search_name":"snapcastermage","description":"Flash \n When Snapcaster Mage enters the battlefield, target instant or sorcery card in your graveyard gains flashback until end of turn. The flashback cost is equal to its mana cost.   (You may cast that card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":2,"colors":["blue"],"primary_type":"Creature","sub_type":"Human Wizard","count":4},{"id":18416,"multiverse_id":227676,"set_number":78,"name":"Snapcaster Mage","search_name":"snapcastermage","description":"Flash \n When Snapcaster Mage enters the battlefield, target instant or sorcery card in your graveyard gains flashback until end of turn. The flashback cost is equal to its mana cost.   (You may cast that card from your graveyard for its flashback cost. Then exile it.)","converted_mana_cost":2,"colors":["blue"],"primary_type":"Creature","sub_type":"Human Wizard","count":4},{"id":12478,"multiverse_id":113523,"set_number":51,"name":"Cancel","search_name":"cancel","description":"Counter target spell.","converted_mana_cost":3,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":1},{"id":18883,"multiverse_id":241985,"set_number":53,"name":"Dissipate","search_name":"dissipate","description":"Counter target spell. If that spell is countered this way, exile it instead of putting it into its owner's graveyard.","converted_mana_cost":3,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":18883,"multiverse_id":241985,"set_number":53,"name":"Dissipate","search_name":"dissipate","description":"Counter target spell. If that spell is countered this way, exile it instead of putting it into its owner's graveyard.","converted_mana_cost":3,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":18883,"multiverse_id":241985,"set_number":53,"name":"Dissipate","search_name":"dissipate","description":"Counter target spell. If that spell is countered this way, exile it instead of putting it into its owner's graveyard.","converted_mana_cost":3,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":18883,"multiverse_id":241985,"set_number":53,"name":"Dissipate","search_name":"dissipate","description":"Counter target spell. If that spell is countered this way, exile it instead of putting it into its owner's graveyard.","converted_mana_cost":3,"colors":["blue"],"primary_type":"Instant","sub_type":null,"count":4},{"id":17681,"multiverse_id":214063,"set_number":21,"name":"Consecrated Sphinx","search_name":"consecratedsphinx","description":"Flying\nWhenever an opponent draws a card, you may draw two cards.","converted_mana_cost":6,"colors":["blue"],"primary_type":"Creature","sub_type":"Sphinx","count":2},{"id":17681,"multiverse_id":214063,"set_number":21,"name":"Consecrated Sphinx","search_name":"consecratedsphinx","description":"Flying\nWhenever an opponent draws a card, you may draw two cards.","converted_mana_cost":6,"colors":["blue"],"primary_type":"Creature","sub_type":"Sphinx","count":2},{"id":23783,"multiverse_id":389531,"set_number":112,"name":"Frost Titan","search_name":"frosttitan","description":"Whenever Frost Titan becomes the target of a spell or ability an opponent controls, counter that spell or ability unless its controller pays {2}.\nWhenever Frost Titan enters the battlefield or attacks, tap target permanent. It doesn't untap during its controller's next untap step.","converted_mana_cost":6,"colors":["blue"],"primary_type":"Creature","sub_type":"Giant","count":1}]};
    decks.push(counterSpellDeck);

    // Save
    localStorageService.set('decks', decks);
  }

  return {
    index: function(){
      return decks;
    },
    show: function(id){
      return _.findWhere(decks, {id: id});
    },
    destroy: function(id){
      var decks = _.reject(decks, function(deck){
        return deck.id == id;
      });
      localStorageService.set('decks', decks);
    },
    save: function(deck){
      // Check whether to create or update
      if (deck.id) {
        // Find deck and update it.
        var oldDeck = _.findWhere(decks, {id: deck.id});
        oldDeck.cards = deck.cards;
        oldDeck.name = deck.name;
      } else {
        // Create 
        deck.id = Math.floor(Math.random() * 10000000);
        decks.push(deck);
      }

      localStorageService.set('decks', decks);
    }
  }
}]);







